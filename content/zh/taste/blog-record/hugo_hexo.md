---

title: "SSH ä¹‹ Githubï¼ˆå•/å¤šè´¦å·ï¼‰"
date: 2020-04-02T11:59:34+08:00
tags: ["Git","Blog"]
series: ["notes-on-blog"]
aliases: ["/study/blog/ssh/"]
gitinfo: true
dropCap: false
---

## å‰è¨€

ä½¿ç”¨ Github Page éƒ¨ç½²ä¸ªäººåšå®¢åä¾¿çŸ¥é“ï¼Œå½“æˆ‘ä»¬ç”¨ã€Œç”¨æˆ·å.github.ioã€ä½œä¸ºä»“åº“åæ—¶ï¼Œå†å°† public æ–‡ä»¶æ¨è‡³è¯¥ Github ä»“åº“ï¼Œä¾¿å¯å¾—åˆ°ä¸€ä¸ªå½¢ä¸ºã€Œç”¨æˆ·å.github.ioã€çš„ç½‘å€ã€‚æ˜¾ç„¶ï¼Œè¿™ç§ä»“åº“ååœ¨ä¸€ä¸ª Github è´¦å·ä¸­åªèƒ½å­˜åœ¨ä¸€ä¸ªï¼Œæ•…è€Œä¸€ä¸ªè´¦å·åªèƒ½å¾—åˆ°ä¸€ä¸ªè¿™æ ·çš„ç½‘å€ã€‚ğŸ˜‘

<blockquote class="quote">æŒ‰ç†ä¸€ä¸ªä»“åº“å¯éƒ¨ç½²å‡ºä¸€ä¸ªé™æ€ç½‘ç«™ï¼Œä½† ã€Œç”¨æˆ·å.github.ioã€å·²ç»ç®—æ˜¯å…¶ä¸­æœ€ç®€ä¾¿æœ€å¥½è®°çš„ç½‘å€ã€‚ä¸åœ¨æ„åŸŸåé•¿çš„è¯ï¼Œä¸€ä¸ª Github è´¦æˆ·è‡ªç„¶å¯å¾—åˆ°å¤šä¸ªä¸ªäººåšå®¢ã€‚</blockquote>

ç”±äºæˆ‘ä¹‹å‰èŠ±äº†å¤§é‡ç²¾åŠ›é¼“å¼„äº†ä¸€ä¸ª Hexo æ¡†æ¶ï¼Œä¸»é¢˜ä¸º Next çš„åšå®¢ï¼Œå› åŠ å…¥äº†è®¸å¤šèŠ±é‡Œèƒ¡å“¨ä½†å´å¹¶æ²¡å¿…è¦çš„åŠŸèƒ½ï¼Œç½‘ç«™æ‰“å¼€é€Ÿåº¦æ…¢ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘è½¬è€Œä½¿ç”¨ Hugo æ¡†æ¶çš„åŸå›  ã€‚æˆ‘æ—¢ä¸æƒ³æ”¾å¼ƒé­”æ”¹å·²ä¹…çš„åšå®¢ï¼Œåˆä¸æƒ³ç½‘å€å¤ªä¸‘ï¼ˆç»‘å®šä¸ªäººåŸŸåå¯ä»¥é¿å…è¿™ç‚¹ï¼‰ï¼Œäºæ˜¯å¹²è„†æ–°ç”³è¯·äº†ä¸ª Github è´¦å·ç”¨ä»¥é…åˆ Hugo æ­å»ºä¸ªäººåšå®¢ã€‚ğŸ™ƒ

ä½†è¿™æ—¶ä¾¿é¢ä¸´é—®é¢˜ï¼Œä¸€æ–¹é¢ä»æ‰§ç€äºé¼“å¼„ Next ä¸»é¢˜æ–°åŠŸèƒ½ï¼Œå¦ä¸€æ–¹é¢è¿˜å¾—å‘ Hugo æ‰€åœ¨çš„ Github ä»“åº“ä¸Šä¼ æ›´æ–°æ–‡ä»¶ï¼Œè€Œä¸”ä¸¤ä¸ªåšå®¢éƒ½æ˜¯é€šè¿‡é»˜è®¤çš„ HTTPS çš„æ–¹å¼ä¸Šä¼ æ–‡ä»¶ï¼ŒHTTPS è¾“å…¥è´¦å·å¯†ç åä¼šé»˜è®¤ä¿å­˜ï¼Œè¿™å°±å¯¼è‡´ç”µè„‘ç™»é™† Github æ—¶å¯èƒ½ä¼šé”™ä½ï¼Œå³å¯èƒ½ä½¿ç”¨äº†è´¦å·ä¸€çš„å¯†ç å»ç™»é™†è´¦å·äºŒã€‚

é’ˆå¯¹è¿™ç§æƒ…å†µæœ‰ä¸€ç§è§£å†³æ–¹æ³•ï¼šåœ¨æƒ³åˆ‡æ¢ç™»é™†è´¦å·äºŒæ—¶ï¼Œåˆ å»å·²ä¿å­˜çš„ Github è´¦å·ä¸€çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œæ¥ç€å†è¾“å…¥è´¦å·äºŒçš„ç”¨æˆ·åå’Œå¯†ç ã€‚

åˆ å»æ–¹æ³•å¦‚ä¸‹ï¼š

åœ¨ä»¥ä¸‹è·¯å¾„æ‰¾åˆ° Github çš„ Windows å‡­æ®ï¼Œç›´æ¥åˆ é™¤å³å¯ã€‚

![Windowså‡­æ®](/images/å…´è¶£æ¢ç´¢/å»ºç«™ç¬”è®°/Windows.png "æ§åˆ¶é¢æ¿â†’ç”¨æˆ·è´¦æˆ·â†’å‡­æ®ç®¡ç†å™¨")

æ˜¾ç„¶è¿™æ ·çš„æ“ä½œæä¸ºéº»çƒ¦ï¼Œå€˜è‹¥èƒ½é€šè¿‡ SSH åˆ†åˆ«åŒ¹é…å¥½ä¸€ä¸ªè´¦å·ï¼Œé‚£å°±èƒ½å…å»æ¯æ¬¡è¾“å…¥è´¦å·å¯†ç çš„éº»çƒ¦è¿‡ç¨‹äº†[^1]ğŸ˜ã€‚

å…ˆæ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ SSHï¼š

## å•è´¦å·

é¦–å…ˆæ‰§è¡Œä¸‹è¡Œå‘½ä»¤ç”Ÿæˆ SSH å¯†é’¥å¯¹ï¼š

```javascript
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
```

å°†ä¸Šé¢çš„é‚®ç®±åœ°å€æ”¹ä¸ºä½ è‡ªå·±åœ¨ GitHub ä¸Šçš„[é‚®ç®±åœ°å€](https://github.com/settings/emails)ã€‚å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡ç”Ÿæˆçš„è¯ï¼Œä¸€è·¯å›è½¦å³å¯ï¼ˆå£ä»¤ passphrase éå¿…é¡»ï¼‰ã€‚è‹¥é‡åˆ°éœ€å›ç­”ã€Œ yes or no ?ã€ï¼Œé”®å…¥ `yes `å¹¶å›è½¦å³å¯ã€‚

è¿™æ ·å°±ä¼šåœ¨Cç›˜ç”¨æˆ·ç›®å½•ä¸‹ç”Ÿæˆ`.ssh`æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«äº† id_rsa å’Œ id_rsa.pub è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå‰è€…æ˜¯ç§é’¥ï¼Œåè€…æ˜¯å…¬é’¥ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€ id_rsa.pubï¼Œå¤åˆ¶å…¶ä¸­çš„å…¨éƒ¨å†…å®¹ï¼Œå†å» GitHub ä¸Š[è®¾ç½®](https://github.com/settings/keys)ä¸€ä¸ª New SSH keyï¼Œæ ‡é¢˜éšæ„èµ·ï¼Œæœ€åç²˜è´´å…¬é’¥å³å¯ã€‚è¿™æ ·æœ¬åœ°çš„ id_rsa å¯†é’¥å°±å¯ä»¥å’Œ GitHubä¸Šçš„ id_rsa.pub å…¬é’¥è¿›è¡Œé…å¯¹ï¼ŒæˆæƒæˆåŠŸã€‚

æ³¨ï¼šå¦‚æœä½ ä¹‹å‰é€šè¿‡`git remote add` æ·»åŠ äº† Github ä»“åº“çš„ HTTPS åœ°å€[^2]ï¼Œé‚£ä¹ˆéœ€è¦ä¿®æ”¹ä»“åº“çš„è¿œç¨‹ä»“åº“é“¾æ¥åœ°å€ä¸º SSH åœ°å€ï¼Œåœ¨..æœ¬åœ°ä»“åº“æ–‡ä»¶..ä¸­æ‰“å¼€ git bashï¼Œé”®å…¥å¦‚ä¸‹å‘½ä»¤ï¼š

```javascript
git remote set-url origin git@github.com:Nimnahc2020/myblog.git
```

å°†`git@github.com:Nimnahc2020/myblog.git`æ¢ä¸ºä½ ä»“åº“çš„ SSH åœ°å€å³å¯ã€‚

![SSH](/images/å…´è¶£æ¢ç´¢/å»ºç«™ç¬”è®°/SSH.png "SSH åœ°å€")

æ­¤å¤–ï¼Œå½“ä½ æœ¬åœ°ç¬¬ä¸€æ¬¡è¿æ¥ GitHub çš„æœåŠ¡å™¨æ—¶ï¼Œå¯èƒ½ä¼šæœ‰è­¦å‘Šä¿¡æ¯ï¼Œé”®å…¥ `yes` å¹¶å›è½¦å³å¯ã€‚

## å¤šè´¦å·

åŒå•è´¦å·ä¸€æ ·ï¼Œå…ˆå¾—åˆ°ä¸¤ç»„å¯†é’¥å¯¹ï¼Œé‚®ç®±åˆ†åˆ«å¯¹åº”ä¸¤ä¸ªè´¦å·ï¼š

```javascript
# å¸å·ä¸€
ssh-keygen -t rsa -b 4096 -C "your_email@example_one.com"

# å¸å·äºŒ
ssh-keygen -t rsa -b 4096 -C "your_email@example_two.com"
```

è¿™é‡Œ..æ³¨æ„..ï¼Œå½“çœ‹åˆ°æç¤ºï¼š

```javascript
Enter file in which to save the key (/home/archie/.ssh/id_rsa): 
```

ä¿®æ”¹ä¸€ä¸‹é»˜è®¤çš„ `id_rsa`ï¼Œå»ºè®®åœ¨åé¢åŠ ä¸Šä½ çš„ GitHub ç”¨æˆ·åï¼Œæ¯”å¦‚ä¿®æ”¹ä¸º `id_rsa_nimnahc`ã€‚æˆ–è€…ç›´æ¥è¿›å…¥`.ssh` æ–‡ä»¶å¤¹ä¿®æ”¹ç›¸åº”æ–‡ä»¶åç§°ï¼Œå¦‚`id_rsa_nimnahc`å’Œ `id_rsa_nimnahc.pub`ã€‚

é€šè¿‡ä¸Šè¿°æ“ä½œï¼Œæˆ‘å¾—åˆ°`id_rsa_nimnahc`å’Œ`id_rsa_willcai`ä¸¤ä»½å¯†é’¥ã€‚

ç„¶åï¼Œæ‰§è¡Œä¸‹é¢ä¸‰è¡Œå‘½ä»¤ï¼Œå°†ç”Ÿæˆçš„ä¸¤ä¸ªå¯†é’¥æ·»åŠ åˆ° ssh-agentï¼š

```javascript
$ eval "$(ssh-agent -s)"
$ ssh-add ~/.ssh/id_rsa_nimnahc
$ ssh-add ~/.ssh/id_rsa_willcai
```

æ¥ä¸‹æ¥ï¼Œåœ¨`.ssh`æ–‡ä»¶å¤¹å†…æ·»åŠ ä¸€ä¸ª `config` æ–‡ä»¶æ¥é…ç½® SSHï¼š

```javascript
$ touch config
```

è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼ˆè‡ªè¡Œä¿®æ”¹ `host` å’Œ `IdentityFile`ï¼‰

```javascript
Host WillCAI2020.github.com
        HostName github.com
		User git
        IdentityFile ~/.ssh/id_rsa_willcai

Host Nimnahc2020.github.com
        HostName github.com
		User git
        IdentityFile ~/.ssh/id_rsa_nimnahc
```

ç±»ä¼¼çš„ï¼Œä¿®æ”¹ä¸‹ç›¸åº”ä»“åº“çš„è¿œç¨‹ä»“åº“é“¾æ¥åœ°å€ï¼š

```javascript
# å¸å·ä¸€
$ git remote set-url origin git@Willcai2020.github.com:Willcai2020/blog-hexo.git

# å¸å·äºŒ
$ git remote set-url origin git@Nimnahc2020.github.com:Nimnahc2020/myblog.git
```

..ç‰¹åˆ«æ³¨æ„..ï¼šä¸»æœºååˆ†åˆ«æ˜¯ `Willcai2020.github.com` å’Œ `Nimnahc2020.github.com`ï¼Œè€Œä¸å†æ˜¯é»˜è®¤çš„ `github.com` äº†ï¼Œä»¥åå…‹éš†ä»“åº“æ—¶ä¹Ÿè¦..æ³¨æ„..ï¼šä¿®æ”¹ä¸ºå¸å·çš„ç›¸åº”ä¸»æœºåã€‚

æœ€åï¼Œå°†ç›¸åº”çš„å…¬é’¥æ·»åŠ åˆ°ä½ ç›¸åº”çš„ GitHub å¸å·å³å¯ã€‚

å¯é€šè¿‡å¦‚ä¸‹å‘½ä»¤éªŒè¯æ˜¯å¦æˆåŠŸï¼š

```javascript
$ ssh -T git@WillCAI2020.github.com
$ ssh -T git@Nimnahc2020.github.com
```

è‹¥å‡ºç°å¦‚ä¸‹æç¤ºï¼š

```javascript
Hi WillCAI2020! You've successfully authenticated, but GitHub does not provide shell access.
```

å³è¡¨ç¤ºä¸è¿œç¨‹ä»“åº“å…¬é’¥åŒ¹é…æˆåŠŸã€‚ğŸ‰ğŸ¾ğŸ¥‚

## åè¯­

æœ¬æ‰“ç®—é€šè¿‡è¿™ä¸ªæ–¹å¼å®ç°å…å¯†åˆ†åˆ«éƒ¨ç½²çš„ï¼Œä½†å‘ç° hexo å¹¶æœªè¾¾åˆ°é¢„æƒ³æ•ˆæœï¼Œåœ¨`hexo d`åæŠ¥é”™`git@github.com: Permission denied (publickey)`,ä½†å€˜è‹¥é€šè¿‡ Git å‘½ä»¤æäº¤ public æ–‡ä»¶ï¼Œå´å¯ä»¥å®ç°æäº¤ã€‚ğŸ¤”

å› è€Œéƒ¨ç½²`hexo`æˆ‘ä»ç„¶ä½¿ç”¨ HTTPS åœ°å€ï¼Œè€Œæäº¤ Hugo åŸç æ—¶æˆ‘ä¾¿é€šè¿‡ SSH åœ°å€å®ç°å…ç™»é™†æäº¤ï¼Œè¿™ç®—æ˜¯ä¸€ç§æŠ˜ä¸­çš„æ–¹æ¡ˆå§ã€‚ğŸ™ƒ

## å‚è€ƒæ–‡ç« 

1. [GitHub Help | å…³äºSSH](https://help.github.com/en/articles/connecting-to-github-with-ssh)
2. [GitHub Issues | åŒä¸€å°ç”µè„‘é…ç½®å¤šä¸ª git è´¦å·](https://github.com/jawil/notes/issues/2)
3. [CSDN | è§£å†³ remote: Permission to userA/repo.git denied to userB](https://blog.csdn.net/klxh2009/article/details/76019742)
4. [reuixiy | ä½¿ç”¨ SSH è¿æ¥åˆ° GitHubï¼ˆå¤šå¸å·ï¼‰](https://io-oi.me/tech/ssh-with-multiple-github-accounts/)

[^1]:SSH ä¸ HTTPS çš„åŒºåˆ«åŠä»‹ç»å¯æµè§ˆ[è¿™ç¯‡æ–‡ç« ](https://www.cnblogs.com/dzblog/p/6930147.html)ã€‚

[^2]: å¯é€šè¿‡æµè§ˆæœ¬åœ°ä»“åº“ `.git`æ–‡ä»¶ä¸‹çš„ `config` æ–‡ä»¶æ¥ç¡®è®¤åœ°å€ã€‚